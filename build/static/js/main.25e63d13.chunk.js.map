{"version":3,"sources":["components/Auth/useFormValidation.js","components/Auth/validateCreateLink.js","firebase/context.js","components/Link/CreateLink.js","utils/index.js","firebase/config.js","firebase/index.js","firebase/firebase.js","components/Link/LinkItem.js","components/Link/LinkList.js","components/Link/LinkDetail.js","components/Link/SearchLinks.js","components/Auth/validateLogin.js","components/Auth/Login.js","components/Auth/ForgotPassword.js","components/Header.js","components/Auth/useAuth.js","components/App.js","serviceWorker.js","index.js"],"names":["useFormValidation","initialState","validate","authenticate","_useState","useState","_useState2","Object","slicedToArray","values","setValues","_useState3","_useState4","errors","setErrors","_useState5","_useState6","isSubmitting","setSubmitting","useEffect","keys","length","console","log","handleChange","e","persist","prevValues","objectSpread","defineProperty","target","name","value","handleSubmit","preventDefault","validationErrors","handleBlur","validateCreateLink","description","url","test","FirebaseContext","createContext","INITIAL_STATE","CreateLink","props","_useContext","useContext","firebase","user","_useFormValidation","newLink","postedBy","id","uid","displayName","votes","comments","created","Date","now","db","collection","add","history","push","react_default","a","createElement","onSubmit","className","type","onChange","placeholder","autoComplete","LINKS_PER_PAGE","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","Firebase","classCallCheck","this","app","initializeApp","auth","firestore","email","password","createUserWithEmailAndPassword","newUser","updateProfile","signInWithEmailAndPassword","signOut","sendPasswordResetEmail","withRouter","_ref","link","index","showCount","postedByAuthUser","style","cursor","onClick","voteRef","doc","get","then","exists","previousVotes","data","vote","votedBy","updatedVotes","concat","toConsumableArray","voteCount","update","href","fontStyle","color","replace","distanceInWordsToNow","react_router_dom","to","Fragment","delete","catch","err","error","LinkList","links","setLinks","setCursor","loading","setLoading","isNewPage","location","pathname","includes","isTopPage","page","Number","match","params","linksRef","handleSnapshot","snapshot","docs","map","lastLink","unsubscribe","hasCursor","Boolean","orderBy","limit","onSnapshot","startAfter","offset","axios","response","getLinks","pageIndex","opacity","i","Link_LinkItem","key","LinkDetail","setLink","commentText","setCommentText","linkId","linkRef","getLink","cols","rows","previousComments","comment","text","updatedComments","previousState","SearchLinks","filteredLinks","setFilteredLinks","filter","setFilter","query","toLowerCase","matchedLinks","filteredLink","validateLogin","Login","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","prev","next","login","register","t0","setFirebaseError","message","stop","apply","arguments","setLogin","firebaseError","onBlur","disabled","background","prevLogin","ForgotPassword","resetPasswordEmail","setResetPasswordEmail","isPasswordReset","setIsPasswordReset","passwordResetError","setPasswordResetError","handleResetPassword","resetPassword","src","alt","logout","useAuth","authUser","setAuthUser","onAuthStateChanged","App","context","Provider","components_Header","react_router","exact","path","render","component","window","hostname","ReactDOM","components_App","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.25e63d13.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\n\nfunction useFormValidation(initialState, validate, authenticate) {\n  const [values, setValues] = useState(initialState);\n  const [errors, setErrors] = useState({});\n  const [isSubmitting, setSubmitting] = useState(false);\n\n  useEffect(() => {\n    if (isSubmitting) {\n      const noErrors = Object.keys(errors).length === 0;\n\n      if (noErrors) {\n        console.log(\"use effect no errors\");\n        authenticate();\n\n        setSubmitting(false);\n      } else setSubmitting(false);\n    }\n  }, [errors]);\n\n  const handleChange = e => {\n    e.persist();\n\n    setValues(prevValues => ({\n      ...prevValues,\n      [e.target.name]: e.target.value\n    }));\n  };\n\n  const handleBlur = () => {\n    const validationErrors = validate(values);\n\n    setErrors(validationErrors);\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n\n    const validationErrors = validate(values);\n\n    setErrors(validationErrors);\n\n    setSubmitting(true);\n  };\n\n  return {\n    handleChange,\n    handleSubmit,\n    handleBlur,\n    values,\n    errors,\n    isSubmitting\n  };\n}\n\nexport default useFormValidation;\n","export default function validateCreateLink(values) {\n  let errors = {};\n\n  //description errors\n\n  if (!values.description) {\n    errors.description = \"Description required\";\n  } else if (values.description.length < 10) {\n    errors.description = \"Description must be at least 10 characters\";\n  }\n\n  //url errors\n  if (!values.url) {\n    errors.url = \"Url required\";\n  } else if (!/^(ftp|http|https):\\/\\/[^ \"]+$/.test(values.url)) {\n    errors.url = \"Url must be valid\";\n  }\n\n  return errors;\n}\n","import { createContext } from \"react\";\r\n\r\nconst FirebaseContext = createContext(null);\r\n\r\nexport default FirebaseContext;\r\n","import React, { useContext } from \"react\";\nimport useFormValidation from \"../Auth/useFormValidation\";\nimport validateCreateLink from \"../Auth/validateCreateLink\";\nimport FirebaseContext from \"../../firebase/context\";\n\nconst INITIAL_STATE = {\n  description: \"\",\n  url: \"\"\n};\n\nfunction CreateLink(props) {\n  const { firebase, user } = useContext(FirebaseContext);\n\n  const handleCreateLink = () => {\n    if (!user) {\n      props.history.push(\"/login\");\n    } else {\n      const { url, description } = values;\n      const newLink = {\n        url,\n        description,\n        postedBy: {\n          id: user.uid,\n          name: user.displayName\n        },\n        votes: [],\n        comments: [],\n        created: Date.now()\n      };\n\n      firebase.db.collection(\"links\").add(newLink);\n\n      props.history.push(\"/\");\n    }\n  };\n\n  const { handleSubmit, handleChange, values, errors } = useFormValidation(\n    INITIAL_STATE,\n    validateCreateLink,\n    handleCreateLink\n  );\n\n  return (\n    <form onSubmit={handleSubmit} className=\"flex flex-column mt3\">\n      <input\n        type=\"text\"\n        value={values.description}\n        onChange={handleChange}\n        name=\"description\"\n        placeholder=\"A description of your link\"\n        autoComplete=\"nope\"\n        className={errors.description && \"error-input\"}\n      />\n\n      {errors.description && <p className=\"error-text\">{errors.description}</p>}\n\n      <input\n        type=\"url\"\n        value={values.url}\n        onChange={handleChange}\n        name=\"url\"\n        placeholder=\"The url of the link\"\n        autoComplete=\"nope\"\n        className={errors.url && \"error-input\"}\n      />\n\n      {errors.url && <p className=\"error-text\">{errors.url}</p>}\n\n      <button className=\"button\" type=\"submit\">\n        Submit\n      </button>\n    </form>\n  );\n}\n\nexport default CreateLink;\n","export const LINKS_PER_PAGE = 5;\n\nexport function getDomain(url) {\n  return url.replace(/^https?:\\/\\//i, \"\");\n}\n\n/* EMAIL REGEX: !/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i.test(values.email) */\n/* URL REGEX: !/^(ftp|http|https):\\/\\/[^ \"]+$/.test(values.url) */\n","var firebaseConfig = {\r\n  apiKey: \"AIzaSyC_R23iLDYCmmVriQIJ9MEiwYN1ei2Eqbs\",\r\n  authDomain: \"hacker-news-123.firebaseapp.com\",\r\n  databaseURL: \"https://hacker-news-123.firebaseio.com\",\r\n  projectId: \"hacker-news-123\",\r\n  storageBucket: \"hacker-news-123.appspot.com\",\r\n  messagingSenderId: \"491339062042\",\r\n  appId: \"1:491339062042:web:89ce554563ec431e192aa3\"\r\n};\r\n\r\nexport default firebaseConfig;\r\n","import firebase from \"./firebase\";\r\nimport FirebaseContext from \"./context\";\r\n\r\nexport { FirebaseContext };\r\n\r\nexport default firebase;\r\n","import app from \"firebase/app\";\r\nimport \"firebase/auth\";\r\nimport \"firebase/firestore\";\r\nimport firebaseConfig from \"./config\";\r\n\r\n// Initialize Firebase\r\n\r\nclass Firebase {\r\n  constructor() {\r\n    app.initializeApp(firebaseConfig);\r\n    this.auth = app.auth();\r\n    this.db = app.firestore();\r\n  }\r\n\r\n  async register(name, email, password) {\r\n    const newUser = await this.auth.createUserWithEmailAndPassword(\r\n      email,\r\n      password\r\n    );\r\n\r\n    return await newUser.user.updateProfile({\r\n      displayName: name\r\n    });\r\n  }\r\n\r\n  async login(email, password) {\r\n    return await this.auth.signInWithEmailAndPassword(email, password);\r\n  }\r\n\r\n  async logout() {\r\n    await this.auth.signOut();\r\n  }\r\n\r\n  async resetPassword(email) {\r\n    await this.auth.sendPasswordResetEmail(email);\r\n  }\r\n}\r\n\r\nconst firebase = new Firebase();\r\n\r\nexport default firebase;\r\n","import React, { useContext } from \"react\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport { getDomain } from \"../../utils\";\nimport distanceInWordsToNow from \"date-fns/distance_in_words_to_now\";\nimport { FirebaseContext } from \"../../firebase\";\n\nfunction LinkItem({ link, index, showCount, history }) {\n  const { firebase, user } = useContext(FirebaseContext);\n\n  const handleVote = () => {\n    if (!user) {\n      history.push(\"/login\");\n    } else {\n      const voteRef = firebase.db.collection(\"links\").doc(link.id);\n\n      voteRef.get().then(doc => {\n        if (doc.exists) {\n          const previousVotes = doc.data().votes;\n          const vote = {\n            votedBy: {\n              id: user.uid,\n              name: user.displayName\n            }\n          };\n          const updatedVotes = [...previousVotes, vote];\n\n          const voteCount = updatedVotes.length;\n\n          voteRef.update({\n            votes: updatedVotes,\n            voteCount\n          });\n        }\n      });\n    }\n  };\n\n  const handleDeleteLink = () => {\n    const linkRef = firebase.db.collection(\"links\").doc(link.id);\n    linkRef\n      .delete()\n      .then(() => {\n        console.log(`document with id: ${link.id} deleted`);\n      })\n      .catch(err => {\n        console.error(\"error deleting document:\", err);\n      });\n  };\n\n  const postedByAuthUser = user && user.uid === link.postedBy.id;\n\n  return (\n    <div className=\"flex items-start mt2\">\n      <div className=\"flex items-center\">\n        {showCount && <span className=\"grey\">{index}.</span>}\n        <div\n          style={{ cursor: \"pointer\" }}\n          className=\"vote-button\"\n          onClick={handleVote}\n        >\n          ▲\n        </div>\n      </div>\n      <div className=\"ml1\">\n        <div>\n          <a href={link.url} className=\"black no-underline\">\n            {link.description}{\" \"}\n          </a>\n          <span\n            style={{ fontStyle: \"italic\", color: \"orange\" }}\n            className=\"link\"\n          >\n            ({getDomain(link.url)})\n          </span>\n        </div>\n        <div className=\"f6 lh-copy gray\">\n          {link.voteCount} votes by {link.postedBy.name}{\" \"}\n          {distanceInWordsToNow(link.created)}\n          {\" | \"}\n          <Link to={`/link/${link.id}`}>\n            {link.comments.length > 0\n              ? `${link.comments.length} comments`\n              : \"discuss\"}\n          </Link>\n          {postedByAuthUser && (\n            <>\n              {\" | \"}\n              <span className=\"delete-button\" onClick={handleDeleteLink}>\n                delete\n              </span>\n            </>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default withRouter(LinkItem);\n","import React, { useContext, useEffect, useState } from \"react\";\nimport FirebaseContext from \"../../firebase/context\";\nimport LinkItem from \"./LinkItem\";\nimport { LINKS_PER_PAGE } from \"../../utils\";\nimport axios from \"axios\";\n\nfunction LinkList(props) {\n  const { firebase } = useContext(FirebaseContext);\n\n  const [links, setLinks] = useState([]);\n  const [cursor, setCursor] = useState(null);\n  const [loading, setLoading] = useState(false);\n\n  const isNewPage = props.location.pathname.includes(\"new\");\n  const isTopPage = props.location.pathname.includes(\"top\");\n  const page = Number(props.match.params.page);\n  const linksRef = firebase.db.collection(\"links\");\n\n  const handleSnapshot = snapshot => {\n    const links = snapshot.docs.map(doc => {\n      return {\n        id: doc.id,\n        ...doc.data()\n      };\n    });\n\n    setLinks(links);\n\n    const lastLink = links[links.length - 1];\n\n    setCursor(lastLink);\n    setLoading(false);\n  };\n\n  const getLinks = () => {\n    setLoading(true);\n\n    const hasCursor = Boolean(cursor);\n\n    if (isTopPage) {\n      return linksRef\n        .orderBy(\"voteCount\", \"desc\")\n        .limit(LINKS_PER_PAGE)\n        .onSnapshot(handleSnapshot);\n    } else if (page === 1) {\n      return linksRef\n        .orderBy(\"created\", \"desc\")\n        .limit(LINKS_PER_PAGE)\n        .onSnapshot(handleSnapshot);\n    } else if (hasCursor) {\n      return linksRef\n        .orderBy(\"created\", \"desc\")\n        .startAfter(cursor.created)\n        .limit(LINKS_PER_PAGE)\n        .onSnapshot(handleSnapshot);\n    } else {\n      const offset = page * LINKS_PER_PAGE - LINKS_PER_PAGE;\n\n      axios\n        .get(\n          `https://us-central1-hacker-news-123.cloudfunctions.net/linksPagination?offset=${offset}`\n        )\n        .then(response => {\n          const links = response.data;\n          const lastLink = links[links.length - 1];\n          setLinks(links);\n          setCursor(lastLink);\n          setLoading(false);\n        });\n      return () => {};\n    }\n  };\n\n  useEffect(() => {\n    const unsubscribe = getLinks();\n\n    return () => unsubscribe();\n  }, [isTopPage, page]);\n\n  const visitPreviousPage = () => {\n    if (page > 1) props.history.push(`/new/${page - 1}`);\n  };\n\n  const visitNextPage = () => {\n    if (LINKS_PER_PAGE / links.length === 1) {\n      // if (page <= links.length / LINKS_PER_PAGE) {\n      props.history.push(`/new/${page + 1}`);\n    }\n  };\n\n  const pageIndex = page ? (page - 1) * LINKS_PER_PAGE + 1 : 0;\n\n  return (\n    <div style={{ opacity: loading ? 0.25 : 1 }}>\n      {links.map((link, i) => (\n        <LinkItem\n          key={link.id}\n          showCount={true}\n          link={link}\n          index={i + pageIndex}\n        />\n      ))}\n      {isNewPage && (\n        <div className=\"pagination\">\n          <div className=\"pointer mr2\" onClick={visitPreviousPage}>\n            Previous\n          </div>\n          <div className=\"pointer\" onClick={visitNextPage}>\n            Next\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default LinkList;\n","import React, { useEffect, useContext, useState } from \"react\";\nimport FirebaseContext from \"../../firebase/context\";\nimport LinkItem from \"./LinkItem\";\nimport distanceInWordsToNow from \"date-fns/distance_in_words_to_now\";\n\nfunction LinkDetail(props) {\n  const [link, setLink] = useState(null);\n  const { firebase, user } = useContext(FirebaseContext);\n  const [commentText, setCommentText] = useState(\"\");\n\n  const linkId = props.match.params.linkId;\n  const linkRef = firebase.db.collection(\"links\").doc(linkId);\n\n  useEffect(() => {\n    getLink();\n  }, []);\n\n  const getLink = () => {\n    linkRef.get().then(doc => {\n      setLink({ ...doc.data(), id: doc.id });\n    });\n  };\n\n  const handleAddComment = () => {\n    if (!user) {\n      props.history.push(\"/login\");\n    } else {\n      linkRef.get().then(doc => {\n        if (doc.exists) {\n          const previousComments = doc.data().comments;\n\n          const comment = {\n            postedBy: {\n              id: user.uid,\n              name: user.displayName\n            },\n            created: Date.now(),\n            text: commentText\n          };\n\n          const updatedComments = [...previousComments, comment];\n\n          linkRef.update({ comments: updatedComments });\n\n          setLink(previousState => ({\n            ...previousState,\n            comments: updatedComments\n          }));\n\n          setCommentText(\"\");\n        }\n      });\n    }\n  };\n\n  return !link ? (\n    <div>Loading...</div>\n  ) : (\n    <div>\n      <LinkItem showCount={false} link={link} />\n      <textarea\n        onChange={e => setCommentText(e.target.value)}\n        value={commentText}\n        cols=\"60\"\n        rows=\"6\"\n      />\n      <div>\n        <button className=\"button\" onClick={handleAddComment}>\n          Add comment\n        </button>\n      </div>\n      {link.comments.map((comment, i) => (\n        <div key={i}>\n          <p className=\"comment-author\">\n            {comment.postedBy.name} | {distanceInWordsToNow(comment.created)}\n          </p>\n          <p>{comment.text}</p>\n        </div>\n      ))}\n    </div>\n  );\n}\n\nexport default LinkDetail;\n","import React, { useState, useEffect, useContext } from \"react\";\nimport FirebaseContext from \"../../firebase/context\";\nimport LinkItem from \"./LinkItem\";\n\nfunction SearchLinks() {\n  const { firebase } = useContext(FirebaseContext);\n\n  const [filteredLinks, setFilteredLinks] = useState([]);\n\n  const [links, setLinks] = useState([]);\n\n  const [filter, setFilter] = useState(\"\");\n\n  const getInitialLinks = () => {\n    firebase.db\n      .collection(\"links\")\n      .get()\n      .then(snapshot => {\n        const links = snapshot.docs.map(doc => {\n          return { id: doc.id, ...doc.data() };\n        });\n        setLinks(links);\n      });\n  };\n\n  useEffect(() => {\n    getInitialLinks();\n  }, []);\n\n  const handleSearch = e => {\n    e.preventDefault();\n    const query = filter.toLowerCase();\n    const matchedLinks = links.filter(link => {\n      return (\n        link.description.toLowerCase().includes(query) ||\n        link.url.toLowerCase().includes(query) ||\n        link.postedBy.name.toLowerCase().includes(query)\n      );\n    });\n    console.log(matchedLinks);\n    setFilteredLinks(matchedLinks);\n  };\n\n  return (\n    <div>\n      <form onSubmit={handleSearch}>\n        <div>\n          search <input type=\"text\" onChange={e => setFilter(e.target.value)} />\n          <button>OK</button>\n        </div>\n      </form>\n      {filteredLinks.map((filteredLink, i) => (\n        <LinkItem\n          key={filteredLink.id}\n          link={filteredLink}\n          showCount={false}\n          index={i}\n        />\n      ))}\n    </div>\n  );\n}\n\nexport default SearchLinks;\n","export default function validateLogin(values) {\n  let errors = {};\n\n  //email errors\n\n  if (!values.email) {\n    errors.email = \"Email required\";\n  } else if (!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i.test(values.email)) {\n    errors.email = \"Invalid email address\";\n  }\n\n  //password errors\n  if (!values.password) {\n    errors.password = \"Password required\";\n  } else if (values.password.length < 6) {\n    errors.password = \"Password must be at least 6 characters\";\n  }\n\n  return errors;\n}\n","import React, { useState } from \"react\";\nimport useFormValidation from \"./useFormValidation\";\nimport validateLogin from \"./validateLogin\";\nimport firebase from \"../../firebase\";\nimport { Link } from \"react-router-dom\";\n\nconst INITIAL_STATE = {\n  name: \"\",\n  email: \"\",\n  password: \"\"\n};\n\nfunction Login(props) {\n  const authenticateUser = async () => {\n    const { email, password, name } = values;\n\n    try {\n      login\n        ? await firebase.login(email, password)\n        : await firebase.register(name, email, password);\n\n      props.history.push(\"/\");\n    } catch (error) {\n      console.error(\"Authentication error\", error);\n\n      setFirebaseError(error.message);\n    }\n  };\n\n  const {\n    handleChange,\n    handleSubmit,\n    handleBlur,\n    values,\n    errors,\n    isSubmitting\n  } = useFormValidation(INITIAL_STATE, validateLogin, authenticateUser);\n\n  const [login, setLogin] = useState(true);\n  const [firebaseError, setFirebaseError] = useState(null);\n\n  return (\n    <div>\n      <h2 className=\"mv3\">{login ? \"Login\" : \"Create Account\"}</h2>\n      <form\n        onSubmit={handleSubmit}\n        className=\"flex flex-column\"\n        autoComplete=\"nope\"\n      >\n        {!login && (\n          <input\n            onChange={handleChange}\n            value={values.name}\n            name=\"name\"\n            type=\"text\"\n            placeholder=\"Your name\"\n            autoComplete=\"nope\"\n          />\n        )}\n\n        <input\n          onChange={handleChange}\n          value={values.email}\n          onBlur={handleBlur}\n          name=\"email\"\n          type=\"email\"\n          className={errors.email && \"error-input\"}\n          placeholder=\"Your email\"\n          autoComplete=\"nope\"\n        />\n\n        {errors.email && <p className=\"error-text\">{errors.email}</p>}\n\n        <input\n          onChange={handleChange}\n          value={values.password}\n          onBlur={handleBlur}\n          name=\"password\"\n          type=\"password\"\n          className={errors.password && \"error-input\"}\n          autoComplete=\"new-password\"\n          placeholder=\"Choose a secure password\"\n        />\n\n        {errors.password && <p className=\"error-text\">{errors.password}</p>}\n        {firebaseError && <p className=\"error-text\">{firebaseError}</p>}\n\n        <div className=\"flex mt3\">\n          <button\n            disabled={isSubmitting}\n            type=\"submit\"\n            className=\"button pointer  mr2\"\n            style={{ background: isSubmitting ? \"gray\" : \"orange\" }}\n          >\n            Submit\n          </button>\n          <button\n            type=\"button\"\n            className=\"pointer button\"\n            onClick={() => setLogin(prevLogin => !prevLogin)}\n          >\n            {login ? \"need to create an account?\" : \"already have an acount?\"}\n          </button>\n        </div>\n      </form>\n      <div className=\"forgot-password\">\n        <Link to=\"/forgot\">Forgot password?</Link>\n      </div>\n    </div>\n  );\n}\n\nexport default Login;\n","import React, { useState, useContext } from \"react\";\nimport { FirebaseContext } from \"../../firebase\";\n\nfunction ForgotPassword() {\n  const { firebase } = useContext(FirebaseContext);\n\n  const [resetPasswordEmail, setResetPasswordEmail] = useState(\"\");\n  const [isPasswordReset, setIsPasswordReset] = useState(false);\n  const [passwordResetError, setPasswordResetError] = useState(null);\n\n  const handleResetPassword = async () => {\n    try {\n      await firebase.resetPassword(resetPasswordEmail);\n      setIsPasswordReset(true);\n      setPasswordResetError(null);\n    } catch (error) {\n      console.error(\"Error sending email\", error);\n      setPasswordResetError(error.message);\n      setIsPasswordReset(false);\n    }\n  };\n  return (\n    <div>\n      <input\n        type=\"email\"\n        className=\"input\"\n        placeholder=\"Provide your account email\"\n        onChange={e => setResetPasswordEmail(e.target.value)}\n      />\n      <div>\n        <button className=\"button\" onClick={handleResetPassword}>\n          Reset password\n        </button>\n      </div>\n      {isPasswordReset && <p>Check email to reset password</p>}\n      {passwordResetError && <p className=\"error-text\">{passwordResetError}</p>}\n    </div>\n  );\n}\n\nexport default ForgotPassword;\n","import React, { useContext } from \"react\";\nimport { withRouter, NavLink } from \"react-router-dom\";\nimport { FirebaseContext } from \"../firebase\";\n\nfunction Header() {\n  const { user, firebase } = useContext(FirebaseContext);\n\n  return (\n    <div className=\"header\">\n      <div className=\"flex\">\n        <img src=\"/logo.png\" alt=\"Hooks news logo\" className=\"logo\" />\n        <NavLink to=\"/\" className=\"header-title\">\n          V-Newz\n        </NavLink>\n        <NavLink to=\"/\" className=\"header-link\">\n          new\n        </NavLink>\n        <div className=\"divider\">|</div>\n        <NavLink to=\"/top\" className=\"header-link\">\n          top\n        </NavLink>\n        <div className=\"divider\">|</div>\n        <NavLink to=\"/search\" className=\"header-link\">\n          search\n        </NavLink>\n        {user && (\n          <>\n            <div className=\"divider\">|</div>\n            <NavLink to=\"/create\" className=\"header-link\">\n              submit\n            </NavLink>\n          </>\n        )}\n      </div>\n      <div className=\"flex\">\n        {user ? (\n          <>\n            <div className=\"header-name\">{user.displayName} |</div>\n            <div className=\"divider\"></div>\n            <div className=\"header-button\" onClick={() => firebase.logout()}>\n              logout\n            </div>\n          </>\n        ) : (\n          <NavLink to=\"/login\" className=\"header-link\">\n            login\n          </NavLink>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default withRouter(Header);\n","import React, { useEffect, useState } from \"react\";\nimport firebase from \"../../firebase\";\n\nconst useAuth = () => {\n  const [authUser, setAuthUser] = useState(null);\n\n  useEffect(() => {\n    const unsubscribe = firebase.auth.onAuthStateChanged(user => {\n      if (user) setAuthUser(user);\n      else setAuthUser(null);\n    });\n\n    return () => unsubscribe();\n  }, []);\n\n  return authUser;\n};\n\nexport default useAuth;\n","import React from \"react\";\nimport { BrowserRouter, Switch, Route, Redirect } from \"react-router-dom\";\nimport CreateLink from \"./Link/CreateLink\";\nimport LinkList from \"./Link/LinkList\";\nimport LinkDetail from \"./Link/LinkDetail\";\nimport SearchLinks from \"./Link/SearchLinks\";\nimport Login from \"./Auth/Login\";\nimport ForgotPassword from \"./Auth/ForgotPassword\";\nimport Header from \"./Header\";\nimport useAuth from \"./Auth/useAuth\";\nimport firebase, { FirebaseContext } from \"../firebase\";\n\nconst App = () => {\n  const user = useAuth();\n\n  return (\n    <BrowserRouter>\n      <FirebaseContext.Provider value={{ user, firebase }}>\n        <div className=\"app-container\">\n          <Header />\n          <div className=\"route-container\">\n            <Switch>\n              <Route exact path=\"/\" render={() => <Redirect to=\"/new/1\" />} />\n              <Route path=\"/create\" component={CreateLink} />\n              <Route path=\"/login\" component={Login} />\n              <Route path=\"/forgot\" component={ForgotPassword} />\n              <Route path=\"/search\" component={SearchLinks} />\n              <Route path=\"/top\" component={LinkList} />\n              <Route path=\"/new/:page\" component={LinkList} />\n              <Route path=\"/link/:linkId\" component={LinkDetail} />\n            </Switch>\n          </div>\n        </div>\n      </FirebaseContext.Provider>\n    </BrowserRouter>\n  );\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./styles/index.css\";\nimport App from \"./components/App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}